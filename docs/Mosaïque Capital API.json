{
	"info": {
		"_postman_id": "mosaique-capital-simple",
		"name": "üèõÔ∏è Mosa√Øque Capital API - Collection Simplifi√©e",
		"description": "Collection structur√©e avec donn√©es statiques et gestion automatique du token JWT",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Signup - Create User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('User created or already exists', function () {",
									"    pm.expect([201, 409]).to.include(pm.response.code);",
									"});",
									"",
									"if (pm.response.code === 201) {",
									"    console.log('‚úÖ User created successfully');",
									"} else {",
									"    console.log('‚ÑπÔ∏è User already exists');",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser_mosaique\",\n    \"email\": \"test.mosaique@example.com\",\n    \"password\": \"SecurePassword123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/auth/signup",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					}
				},
				{
					"name": "Login - Get Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Login successful', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// Automatically store JWT token",
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    pm.globals.set('jwt_token', responseJson.accessToken);",
									"    console.log('üîë Token automatically stored');",
									"    console.log('üë§ User:', responseJson.username);",
									"    console.log('üîê MFA Enabled:', responseJson.mfaEnabled);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser_mosaique\",\n    \"password\": \"SecurePassword123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/auth/login",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					}
				},
				{
					"name": "Get Current User Info",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/auth/me",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"auth",
								"me"
							]
						}
					}
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    pm.globals.set('jwt_token', responseJson.accessToken);",
									"    console.log('üîÑ Token refreshed and stored');",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refreshToken\": \"YOUR_REFRESH_TOKEN_HERE\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/auth/refresh",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"auth",
								"refresh"
							]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/auth/logout",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"auth",
								"logout"
							]
						}
					}
				}
			]
		},
		{
			"name": "üîê MFA (Two-Factor Authentication)",
			"item": [
				{
					"name": "Setup MFA",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/mfa/setup",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"setup"
							]
						}
					}
				},
				{
					"name": "Download QR Code",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/mfa/qrcode",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"qrcode"
							]
						}
					}
				},
				{
					"name": "Verify MFA Code",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"123456\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/mfa/verify",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"verify"
							]
						}
					}
				},
				{
					"name": "Check MFA Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/mfa/status",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"status"
							]
						}
					}
				},
				{
					"name": "Validate MFA Code",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"123456\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/mfa/validate",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"validate"
							]
						}
					}
				},
				{
					"name": "Disable MFA",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"currentMfaCode\": \"123456\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/mfa/disable",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"disable"
							]
						}
					}
				},
				{
					"name": "Regenerate MFA Secret",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"currentMfaCode\": \"123456\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/mfa/regenerate",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"mfa",
								"regenerate"
							]
						}
					}
				}
			]
		},
		{
			"name": "üí∞ Assets Management",
			"item": [
				{
					"name": "Get All Assets",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/assets",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets"
							]
						}
					}
				},
				{
					"name": "Get Asset by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/assets/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets",
								"1"
							]
						}
					}
				},
				{
					"name": "Get Assets by Type",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/assets/type/REAL_ESTATE",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets",
								"type",
								"REAL_ESTATE"
							]
						}
					}
				},
				{
					"name": "Create Real Estate Asset",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Appartement Paris 15√®me\",\n    \"description\": \"Appartement 3 pi√®ces dans le 15√®me arrondissement de Paris\",\n    \"type\": \"REAL_ESTATE\",\n    \"currentValue\": 450000,\n    \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/assets",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets"
							]
						}
					}
				},
				{
					"name": "Create Stock Asset",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Actions Apple\",\n    \"description\": \"Portefeuille d'actions Apple Inc.\",\n    \"type\": \"STOCK\",\n    \"currentValue\": 25000,\n    \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/assets",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets"
							]
						}
					}
				},
				{
					"name": "Create Bank Account Asset",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Compte √©pargne principal\",\n    \"description\": \"Livret A + PEL\",\n    \"type\": \"BANK_ACCOUNT\",\n    \"currentValue\": 35000,\n    \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/assets",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets"
							]
						}
					}
				},
				{
					"name": "Create Cryptocurrency Asset",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Portfolio Bitcoin\",\n    \"description\": \"Investissement en Bitcoin\",\n    \"type\": \"CRYPTOCURRENCY\",\n    \"currentValue\": 15000,\n    \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/assets",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets"
							]
						}
					}
				},
				{
					"name": "Update Asset",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Appartement Paris 15√®me - R√©nov√©\",\n    \"description\": \"Appartement 3 pi√®ces r√©nov√© dans le 15√®me arrondissement de Paris\",\n    \"type\": \"REAL_ESTATE\",\n    \"currentValue\": 470000,\n    \"currency\": \"EUR\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/assets/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets",
								"1"
							]
						}
					}
				},
				{
					"name": "Delete Asset",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/assets/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"assets",
								"1"
							]
						}
					}
				}
			]
		},
		{
			"name": "üìä Valuations",
			"item": [
				{
					"name": "Get Valuations for Asset",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/valuations/asset/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"valuations",
								"asset",
								"1"
							]
						}
					}
				},
				{
					"name": "Get Valuations by Date Range",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/valuations/asset/1/range?startDate=2024-01-01&endDate=2024-12-31",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"valuations",
								"asset",
								"1",
								"range"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2024-01-01"
								},
								{
									"key": "endDate",
									"value": "2024-12-31"
								}
							]
						}
					}
				},
				{
					"name": "Get Valuation by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/valuations/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"valuations",
								"1"
							]
						}
					}
				},
				{
					"name": "Create Valuation",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"assetId\": 1,\n    \"valuationDate\": \"2024-06-01\",\n    \"value\": 460000,\n    \"currency\": \"EUR\",\n    \"source\": \"Estimation notaire\"\n}"
						},
						"url": {
							"raw": "http://localhost:9999/api/valuations",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"valuations"
							]
						}
					}
				},
				{
					"name": "Delete Valuation",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/valuations/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"valuations",
								"1"
							]
						}
					}
				}
			]
		},
		{
			"name": "üéØ Portfolio Analysis",
			"item": [
				{
					"name": "Get Portfolio Summary",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/portfolio/summary",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"portfolio",
								"summary"
							]
						}
					}
				},
				{
					"name": "Get Portfolio Distribution",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "http://localhost:9999/api/portfolio/distribution",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "9999",
							"path": [
								"api",
								"portfolio",
								"distribution"
							]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		}
	]
}